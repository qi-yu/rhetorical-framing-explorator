<p-toast [position]="'top-center'"></p-toast>

<div class="card flex justify-content-center" class="not-full-width">
    <p-card header="Upload File to Annotate:">
        <p-fileUpload 
            name="myfile" 
            [url]="url+'/upload'" 
            [multiple]="true" 
            accept=".xml, .csv, .tsv" 
            [maxFileSize]="1000000"
            (onSelect)="onSelectFile($event)"
            (onUpload)="onUploadFile($event)"
            [disabled]="uploadCompleted === true"
        >
            <!-- <ng-template let-file pTemplate="file">
                <p><b>FILE TO UPLOAD:</b></p>
                <div *ngIf="selectedFileName !== ''" class="container" style="padding: 10px; margin-bottom: 10px;">
                    <p>{{ selectedFileName }}</p>
                    <p style="margin-left: 10px;">(size: {{ selectedFileSize | fileSize}})</p>
                </div>
                <p-divider></p-divider>
            </ng-template> -->
            <ng-template pTemplate="content">
                <p-divider></p-divider>
                <p><b>UPLOADED FILES:</b></p>
                <ng-container *ngIf="uploadedFiles.length > 0; else noFileMessage">
                    <p-table [value]="uploadedFiles" [tableStyle]="{ 'min-width': '50rem' }" styleClass="p-datatable-gridlines p-datatable-striped">
                        <ng-template pTemplate="header">
                            <tr>
                                <th>File</th>
                                <th>Size</th>
                                <th>Actions</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-file let-i="index">
                            <tr>
                                <td>{{ file.filename }}</td>
                                <td>{{ file.size | fileSize }}</td>
                                <td>
                                    <div class="container">
                                        <p-checkbox [(ngModel)]="file.selectedForAnalyses" [binary]="true" [inputId]="'fileToAnalyze-' + i"></p-checkbox>
                                        <label [for]="'fileToAnalyze-' + i" style="padding-left: 10px;">SELECT FOR ANALYSES</label>
                                        <span class="container" style="padding-left: 20px;">
                                            <p-button (click)="onDeleteFile(file)" [id]="'delete' + i" icon="pi pi-trash" styleClass="p-button-rounded p-button-danger p-button-text"></p-button>
                                            <label [for]="'delete' + i">DELETE</label>
                                        </span>
                                    </div>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </ng-container>
                <ng-template #noFileMessage>
                    <p>(No file uploaded yet)</p>
                </ng-template>
            </ng-template>
        </p-fileUpload>
    </p-card>
</div>